{"version":3,"sources":["ng-image-gallery.min.js"],"names":["keys","enter","esc","left","right","angular","module","provider","defOpts","thumbnails","thumbSize","thumbLimit","inline","bubbles","bubbleSize","imgBubbles","bgClose","piracy","imgAnim","textValues","imageLoadErrorMsg","deleteButtonTitle","editButtonTitle","closeButtonTitle","externalLinkButtonTitle","setOpts","newOpts","extend","$get","filter","$sce","value","type","trustAs","directive","$parse","restrict","scope","link","element","attrs","bind","event","preventDefault","attributes","image","Image","src","showImageAsync","onload","$apply","asyncKind","css","backgroundImage","empty","onerror","$window","$timeout","pre","autoFitBubbles","scrollerWidth","getBoundingClientRect","width","minMargin","bubbleSpace","rawQuotient","bubblesInView","Math","floor","extraSpace","extraMargin","bubbleMargin","finalBubbleSpace","_bubblesInView","_finalBubbleSpace","_bubbleMargin","_safeApply","noop","$watch","$watchCollection","indexCalc","relativeIndexToBubbleWrapper","_activeImageIndex","outBubbles","images","length","_bubblesContainerMarginLeft","$rootScope","$q","ngImageGalleryOpts","replace","transclude","methods","conf","entityName","entityAddress","onOpen","onClose","onDelete","onEdit","template","elem","attr","_showLoader","imgLoading","_hideLoader","_loadImg","imgObj","reject","deferred","defer","hasOwnProperty","img","url","cached","resolve","promise","_setActiveImg","indexOf","_activeImg","_imgMoveDirection","then","imgError","fn","phase","this","$root","$$phase","_deleteImg","_deleteImgCallback","index","console","log","splice","cb","_editImg","close","undefined","imagesFirstWatch","activeImageIndexFirstWatch","newImgIndex","open","imgIndex","opened","document","body","addClass","removeClass","next","prev","backgroundClose","e","noCloseClasses","i","target","classList","which","window","Hammer","hammerElem","on","ev","removeClassFromDocumentBody","$on"],"mappings":"CAAC,WACA,YAGA,IAAIA,IACHC,MAAQ,GACRC,IAAQ,GACRC,KAAQ,GACRC,MAAQ,GAGTC,SACCC,OAAO,+BAAgC,cACvCC,SAAS,qBAAsB,WAC/B,GAAIC,IACHC,YAAiB,EACjBC,UAAc,GACdC,YAAe,EACfC,QAAiB,EACjBC,SAAiB,EACjBC,WAAe,GACfC,YAAiB,EACjBC,SAAiB,EACjBC,QAAa,EACbC,QAAa,SACbC,YACIC,kBAA0B,gCAC1BC,kBAA0B,uBAC1BC,gBAA0B,qBAC1BC,iBAA0B,QAC1BC,wBAA0B,4BAI/B,QACCC,QAAU,SAASC,GAClBrB,QAAQsB,OAAOnB,EAASkB,IAEzBE,KAAO,WACN,MAAOpB,OAITqB,OAAO,uBAAwB,OAAQ,SAASC,GAC5C,MAAO,UAASC,EAAOC,GAErB,MAAOF,GAAKG,QAAQD,GAAQ,OAAQD,OAGvCG,UAAU,gBAAiB,SAAU,SAASC,GAC9C,OACCC,SAAU,IACbC,OAAQ,EACRC,KAAO,SAASD,EAAOE,EAASC,GAC/BD,EAAQE,KAAK,cAAe,SAASC,GACpC,GAAmB,GAAhBL,EAAMpB,OAER,MADAyB,GAAMC,iBACCN,EAAMpB,cAMjBiB,UAAU,kBAAmB,WAC7B,OACCE,SAAU,IACVC,OAAO,EACPC,KAAM,SAAUD,EAAOE,EAASK,GAC/B,GAAIC,GAAQ,GAAIC,MAChBD,GAAME,IAAMH,EAAWI,eACvBH,EAAMI,OAAS,WACdZ,EAAMa,OAAO,WACe,SAAxBN,EAAWO,WACbZ,EAAQa,KAAMC,gBAAiB,QAAUT,EAAWI,eAAiB,OACrET,EAAQe,SAEuB,UAAxBV,EAAWO,WAClBZ,EAAQa,KAAMC,gBAAiB,QAAUT,EAAWI,eAAiB,UAIxEH,EAAMU,QAAU,WACfhB,EAAQe,cAKXpB,UAAU,iBAAkB,UAAW,WAAY,SAASsB,EAASC,GACrE,OACCrB,SAAU,IACVC,OAAO,EACPC,MACCoB,IAAM,SAAUrB,EAAOE,EAASK,GAC/B,GAAIe,GAAiB,WACpB,GAAIC,GAAgBrB,EAAQ,GAAGsB,wBAAwBC,KACvD,IAAoB,GAAjBF,EAAH,CAEA,GAAI9C,GAAauB,EAAMvB,WACnBiD,EAAY,EACZC,EAAelD,EAAaiD,EAC5BE,EAAcL,EAAgBI,EAC9BE,EAAgBC,KAAKC,MAAMH,GAC3BI,EAAaT,EAAiBM,EAAgBF,EAC9CM,EAAcD,EAAaH,EAC3BK,EAAeR,EAAYO,EAC3BE,EAAmBD,EAAezD,CAEtCuB,GAAMoC,eAAiBP,EACvB7B,EAAMqC,kBAAoBF,EAC1BnC,EAAMsC,cAAgB,KAAQJ,EAAa,EAAK,KAEhDlC,EAAMuC,WAAWvE,QAAQwE,OAG1BpB,GAASE,GAETtD,QAAQkC,QAAQiB,GAASf,KAAK,SAAU,WACvCgB,EAASE,KAEVtB,EAAMyC,OAAO,SAAU,WACtBrB,EAASE,KAEVtB,EAAMyC,OAAO,aAAc,WAC1BrB,EAASE,KAEVtB,EAAM0C,iBAAiB,SAAU,WAChCtB,EAASE,WAMbzB,UAAU,oBAAqB,UAAW,WAAY,SAASsB,EAASC,GACxE,OACCrB,SAAU,IACVC,OAAO,EACPC,KAAM,SAAUD,EAAOE,EAASK,GAE/B,GAAIoC,GAAY,WACf,GAAIC,GAA+B5C,EAAMoC,gBAAkBpC,EAAMoC,eAAiBpC,EAAM6C,kBAExFzB,GAAS,WACR,GAAGwB,EAA+B5C,EAAMoC,eAAiB,EAAE,CAC1D,GAAIU,GAAe9C,EAAM6C,kBAAkB,EAAK7C,EAAMoC,eAAkB,CAErEpC,GAAM6C,mBAAsB7C,EAAM+C,OAAOC,OAAS,EACpDhD,EAAMiD,4BAA8B,IAAOjD,EAAMqC,kBAAoBS,EAAc,KAGnF9C,EAAMiD,4BAA8B,IAAOjD,EAAMqC,mBAAqBS,EAAa,GAAM,SAI1F9C,GAAMiD,4BAA8B,QAKvCjF,SAAQkC,QAAQiB,GAASf,KAAK,SAAU,WACvCgB,EAASuB,KAEV3C,EAAMyC,OAAO,iBAAkB,WAC9BrB,EAASuB,KAEV3C,EAAMyC,OAAO,oBAAqB,WACjCrB,EAASuB,KAEV3C,EAAM0C,iBAAiB,SAAU,WAChCtB,EAASuB,UAKZ9C,UAAU,kBAAmB,aAAc,WAAY,KAAM,qBAC9D,SAASqD,EAAY9B,EAAU+B,EAAIC,GAClC,OACCC,SAAU,EACVC,YAAa,EACbvD,SAAW,KACXC,OACC+C,OAAa,IACbQ,QAAa,KACbC,KAAW,KACXC,WAAc,KACdC,cAAgB,KAEhBtF,WAAgB,KAChBC,UAAc,KACdC,WAAe,KACfC,OAAa,KACbC,QAAa,KACbC,WAAgB,KAChBC,WAAgB,KAChBC,QAAa,KACbC,OAAY,KACZC,QAAa,KACbC,WAAoB,KAEpB6E,OAAa,KACbC,QAAa,KACbC,SAAoB,KACpBC,OAAoB,MAErBC,SAAY,qqIAqGZ9D,MACCoB,IAAM,SAASrB,EAAOgE,EAAMC,GAO3BjE,EAAMkE,YAAc,WACnBlE,EAAMmE,YAAa,GAIpBnE,EAAMoE,YAAc,WACnBpE,EAAMmE,YAAa,GAIpBnE,EAAMqE,SAAW,SAASC,GAIzB,IAAIA,EAAQ,MAAOnB,GAAGoB,QAEtB,IAAIC,GAAYrB,EAAGsB,OAGfH,GAAOI,eAAe,WAAW1E,EAAMkE,aAG3C,IAAIS,GAAM,GAAIlE,MAiBd,OAhBAkE,GAAIjE,IAAM4D,EAAOM,IACjBD,EAAI/D,OAAS,WAER0D,EAAOI,eAAe,WAAW1E,EAAMoE,cAGvCE,EAAOI,eAAe,YAAWJ,EAAOO,QAAS,GAErDL,EAASM,QAAQR,IAElBK,EAAIzD,QAAU,WACToD,EAAOI,eAAe,WAAW1E,EAAMoE,cAE3CI,EAASD,OAAO,2BAGVC,EAASO,SAGjB/E,EAAMgF,cAAgB,SAASV,GAG7BtE,EAAM+C,OAAOkC,QAAQjF,EAAMkF,YAAclF,EAAM+C,OAAOkC,QAAQX,IAAYtE,EAAM+C,OAAOC,OAAS,GAE/FhD,EAAM+C,OAAOkC,QAAQjF,EAAMkF,YAAclF,EAAM+C,OAAOkC,QAAQX,IAAW,GACzEtE,EAAM+C,OAAOkC,QAAQjF,EAAMkF,YAAclF,EAAM+C,OAAOkC,QAAQX,MAAatE,EAAM+C,OAAOC,OAAS,GAIlGhD,EAAMmF,kBAAoB,UAG1BnF,EAAMmF,kBAAoB,WAI3BnF,EAAMqE,SAASC,GAAQc,KAAK,SAASd,GACpCtE,EAAMkF,WAAaZ,EACnBtE,EAAM6C,kBAAoB7C,EAAM+C,OAAOkC,QAAQX,GAC/CtE,EAAMqF,UAAW,GACf,WACFrF,EAAMkF,WAAa,KACnBlF,EAAM6C,kBAAoB7C,EAAM+C,OAAOkC,QAAQX,GAC/CtE,EAAMqF,UAAW,KAKnBrF,EAAMuC,WAAa,SAAS+C,GAC3B,GAAIC,GAAQC,KAAKC,MAAMC,OACX,WAATH,GAA8B,WAATA,EACpBD,GAAsB,kBAAT,IACfA,IAGDE,KAAK3E,OAAOyE,IAIdtF,EAAM2F,WAAa,SAAShB,GAC3B,GAAIiB,GAAqB,WACxB,GAAIC,GAAQ7F,EAAM+C,OAAOkC,QAAQN,EACjCmB,SAAQC,IAAIF,GACZ7F,EAAM+C,OAAOiD,OAAOH,EAAO,GAC3B7F,EAAM6C,kBAAoB,EAK3B7C,GAAM6D,UAAUc,IAAKA,EAAKsB,GAAIL,KAG/B5F,EAAMkG,SAAW,SAAUvB,GAClB3E,EAAMzB,QAAQyB,EAAMuD,QAAQ4C,QAEjCnG,EAAM8D,QAASa,IAAKA,KAYxB3E,EAAM+C,OAAiCqD,QAAlBpG,EAAM+C,OAAyB/C,EAAM+C,UAC1D/C,EAAMuD,QAAmC6C,QAAnBpG,EAAMuD,QAA0BvD,EAAMuD,WAC5DvD,EAAMwD,KAA8B4C,QAAhBpG,EAAMwD,KAAuBxD,EAAMwD,QACvDxD,EAAMyD,WAAqC2C,QAApBpG,EAAMyD,WAA2BzD,EAAMyD,WAAe,GAC7EzD,EAAM0D,cAAwC0C,QAAtBpG,EAAM0D,cAA4B1D,EAAM0D,cAAgB,GAGhF1D,EAAM0C,iBAAiB,OAAQ,SAASc,GACvCxD,EAAM5B,WAAqCgI,QAApB5C,EAAKpF,WAA4BoF,EAAKpF,WAAqCgI,QAArBpG,EAAM5B,WAA8B4B,EAAM5B,WAAegF,EAAmBhF,WACzJ4B,EAAM3B,UAAmC+H,QAAnB5C,EAAKnF,UAA2BmF,EAAKnF,UAAoC+H,QAApBpG,EAAM3B,UAA6B2B,EAAM3B,UAAc+E,EAAmB/E,UACrJ2B,EAAM1B,WAAqC8H,QAApB5C,EAAKlF,WAA4BkF,EAAKlF,WAAqC8H,QAApBpG,EAAM1B,WAA6B0B,EAAM1B,WAAe8E,EAAmB9E,WACzJ0B,EAAMzB,OAAgC6H,QAAjB5C,EAAKjF,OAAyBiF,EAAKjF,OAAgC6H,QAAlBpG,EAAMzB,OAA2ByB,EAAMzB,OAAY6E,EAAmB7E,OAC5IyB,EAAMxB,QAAkC4H,QAAlB5C,EAAKhF,QAA0BgF,EAAKhF,QAAkC4H,QAAnBpG,EAAMxB,QAA4BwB,EAAMxB,QAAY4E,EAAmB5E,QAChJwB,EAAMvB,WAAqC2H,QAApB5C,EAAK/E,WAA4B+E,EAAK/E,WAAsC2H,QAArBpG,EAAMvB,WAA8BuB,EAAMvB,WAAe2E,EAAmB3E,WAC1JuB,EAAMtB,WAAqC0H,QAApB5C,EAAK9E,WAA4B8E,EAAK9E,WAAqC0H,QAArBpG,EAAMtB,WAA8BsB,EAAMtB,WAAe0E,EAAmB1E,WACzJsB,EAAMrB,QAAkCyH,QAAlB5C,EAAK7E,QAA0B6E,EAAK7E,QAAkCyH,QAAnBpG,EAAMrB,QAA4BqB,EAAMrB,QAAYyE,EAAmBzE,QAChJqB,EAAMpB,OAAgCwH,QAAjB5C,EAAK5E,OAAyB4E,EAAK5E,OAAgCwH,QAAlBpG,EAAMpB,OAA2BoB,EAAMpB,OAAYwE,EAAmBxE,OAC5IoB,EAAMnB,QAAkCuH,QAAlB5C,EAAK3E,QAA0B2E,EAAK3E,QAAkCuH,QAAnBpG,EAAMnB,QAA4BmB,EAAMnB,QAAYuE,EAAmBvE,QAC9HmB,EAAMlB,WAAyCsH,QAAtB5C,EAAK1E,WAA8B0E,EAAK1E,WAA0CsH,QAAtBpG,EAAMlB,WAAgCkB,EAAMlB,WAAmBsE,EAAmBtE,aAG1LkB,EAAM2D,OAA8ByC,QAAjBpG,EAAM2D,OAAwB3D,EAAM2D,OAAY3F,QAAQwE,KAC3ExC,EAAM4D,QAAgCwC,QAAlBpG,EAAM4D,QAAyB5D,EAAM4D,QAAa5F,QAAQwE,KAC9ExC,EAAM6D,SAAiCuC,QAAlBpG,EAAM6D,SAAyB7D,EAAM6D,SAAc7F,QAAQwE,KAChFxC,EAAM8D,OAA0BsC,QAAhBpG,EAAM8D,OAAuB9D,EAAM8D,OAAS9F,QAAQwE,IAGpE,IAAI6D,IAAmB,CACvBrG,GAAM0C,iBAAiB,SAAU,WAC7B2D,EACFA,GAAmB,EAEZrG,EAAM+C,OAAOC,QACpBhD,EAAMgF,cAAchF,EAAM+C,OAAO/C,EAAM6C,mBAAqB,KAM9D,IAAIyD,IAA6B,CAsIjC,IArIAtG,EAAMyC,OAAO,oBAAqB,SAAS8D,GACvCD,EACFA,GAA6B,EAEtBtG,EAAM+C,OAAOC,QACpBhD,EAAMgF,cACLhF,EAAM+C,OAAOwD,MAMhBvG,EAAMyC,OAAO,SAAU,WACtBrB,EAAS,WACLpB,EAAMzB,QAAQyB,EAAMuD,QAAQiD,WAajCxG,EAAMuD,QAAQiD,KAAO,SAASC,GAE7BzG,EAAM6C,kBAAoB,EAAa4D,EAAW,EAElDzG,EAAM0G,QAAS,EAGX1G,EAAMzB,QAAQP,QAAQkC,QAAQyG,SAASC,MAAMC,SAAS,wBAG1DzF,EAAS,WACRpB,EAAM2D,UACJ,MAIJ3D,EAAMuD,QAAQ4C,MAAQ,WACrBnG,EAAM0G,QAAS,EAGf1I,QAAQkC,QAAQyG,SAASC,MAAME,YAAY,wBAG3C1F,EAAS,WACRpB,EAAM4D,UACN5D,EAAM6C,kBAAoB,GACxB,MAIJ7C,EAAMuD,QAAQwD,KAAO,WACjB/G,EAAM6C,mBAAsB7C,EAAM+C,OAAOC,OAAS,EACpDhD,EAAM6C,kBAAoB,EAG1B7C,EAAM6C,kBAAoB7C,EAAM6C,kBAAoB,GAKtD7C,EAAMuD,QAAQyD,KAAO,WACU,GAA3BhH,EAAM6C,kBACR7C,EAAM6C,kBAAoB7C,EAAM+C,OAAOC,OAAS,EAGhDhD,EAAM6C,qBAKR7C,EAAMiH,gBAAkB,SAASC,GAChC,GAAIlH,EAAMrB,UAAWqB,EAAMzB,OAc3B,IAAI,GAZA4I,IACH,iBACA,0BACA,UACA,QACA,OACA,OACA,mBAKOC,EAAI,EAAGA,EAAIF,EAAEG,OAAOC,UAAUtE,QAClCmE,EAAelC,QAAQiC,EAAEG,OAAOC,UAAUF,QADAA,IAK5CpH,EAAMuD,QAAQ4C,SAcjBnI,QAAQkC,QAAQyG,UAAUvG,KAAK,QAAS,SAASC,GAE7CL,EAAMzB,SAEN8B,EAAMkH,OAAS5J,EAAKI,OAASsC,EAAMkH,OAAS5J,EAAKC,MACnDwD,EAAS,WACRpB,EAAMuD,QAAQwD,SAGR1G,EAAMkH,OAAS5J,EAAKG,KAC3BsD,EAAS,WACRpB,EAAMuD,QAAQyD,SAGR3G,EAAMkH,OAAS5J,EAAKE,KAC3BuD,EAAS,WACRpB,EAAMuD,QAAQ4C,aAMdqB,OAAOC,OAAO,CAChB,GAAIC,GAAa,GAAID,QAAOzD,EAAK,GACjC0D,GAAWC,GAAG,aAAc,SAASC,GACpCxG,EAAS,WACRpB,EAAMuD,QAAQyD,WAGhBU,EAAWC,GAAG,YAAa,SAASC,GACnCxG,EAAS,WACRpB,EAAMuD,QAAQwD,WAGhBW,EAAWC,GAAG,YAAa,SAASC,GAChC5H,EAAMzB,QAET6C,EAAS,WACRpB,EAAMuD,QAAQ4C,YAajB,GAAI0B,GAA8B,WACjC7J,QAAQkC,QAAQyG,SAASC,MAAME,YAAY,wBAG5C5D,GAAW4E,IAAI,sBAAuBD,GACtC3E,EAAW4E,IAAI,sBAAuBD","file":"ng-image-gallery.min.js","sourcesContent":[" (function(){\n\t'use strict';\n\n\t// Key codes\n\tvar keys = {\n\t\tenter : 13,\n\t\tesc   : 27,\n\t\tleft  : 37,\n\t\tright : 39\n\t};\n\n\tangular\n\t.module('thatisuday.ng-image-gallery', ['ngAnimate'])\n\t.provider('ngImageGalleryOpts', function(){\n\t\tvar defOpts = {\n\t\t\tthumbnails  \t:   true,\n\t\t\tthumbSize\t\t: \t80,\n\t\t\tthumbLimit\t\t: \tfalse,\n\t\t\tinline      \t:   false,\n\t\t\tbubbles     \t:   true,\n\t\t\tbubbleSize\t\t: \t20,\n\t\t\timgBubbles  \t:   false,\n\t\t\tbgClose     \t:   false,\n\t\t\tpiracy \t\t\t: \tfalse,\n\t\t\timgAnim \t\t: \t'fadeup',\n\t\t\ttextValues: {\n\t\t\t    imageLoadErrorMsg       : 'Error when loading the image!',\n\t\t\t    deleteButtonTitle       : 'Delete this image...',\n\t\t\t    editButtonTitle         : 'Edit this image...',\n\t\t\t    closeButtonTitle        : 'Close',\n\t\t\t    externalLinkButtonTitle : 'Open image in new tab...'\t\t\t    \n\t\t\t}\t\t\t\n\t\t};\n\n\t\treturn{\n\t\t\tsetOpts : function(newOpts){\n\t\t\t\tangular.extend(defOpts, newOpts);\n\t\t\t},\n\t\t\t$get : function(){\n\t\t\t\treturn defOpts;\n\t\t\t}\n\t\t}\n\t})\n\t.filter('ngImageGalleryTrust', ['$sce', function($sce) {\n      return function(value, type) {\n        // Defaults to treating trusted value as `html`\n        return $sce.trustAs(type || 'html', value);\n      }\n    }])\n    .directive('ngRightClick', ['$parse', function($parse){\n\t    return {\n\t    \trestrict: \"A\",\n\t\t\tscope : false,\n\t\t\tlink : function(scope, element, attrs){\n\t\t\t\telement.bind('contextmenu', function(event){\n\t\t\t\t\tif(scope.piracy == false){\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\treturn scope.piracy;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t    };\n\t}])\n\t.directive(\"showImageAsync\", [function(){\n\t\treturn {\n\t\t\trestrict: \"A\",\n\t\t\tscope: false,\n\t\t\tlink: function (scope, element, attributes){\n\t\t\t\tvar image = new Image();\n\t\t\t\timage.src = attributes.showImageAsync;\n\t\t\t\timage.onload = function(){\n\t\t\t\t\tscope.$apply(function(){\n\t\t\t\t\t\tif(attributes.asyncKind == 'thumb'){\n\t\t\t\t\t\t\telement.css({ backgroundImage: 'url(\"' + attributes.showImageAsync + '\")' });\n\t\t\t\t\t\t\telement.empty(); // remove loading animation element\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(attributes.asyncKind == 'bubble'){\n\t\t\t\t\t\t\telement.css({ backgroundImage: 'url(\"' + attributes.showImageAsync + '\")' });\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\timage.onerror = function(){\n\t\t\t\t\telement.empty(); // remove loading animation element\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}])\n\t.directive(\"bubbleAutoFit\", ['$window', '$timeout', function($window, $timeout){\n\t\treturn {\n\t\t\trestrict: \"A\",\n\t\t\tscope: false,\n\t\t\tlink: {\n\t\t\t\tpre : function (scope, element, attributes){\n\t\t\t\t\tvar autoFitBubbles = function(){\n\t\t\t\t\t\tvar scrollerWidth = element[0].getBoundingClientRect().width;\n\t\t\t\t\t\tif(scrollerWidth == 0) return;\n\n\t\t\t\t\t\tvar bubbleSize = scope.bubbleSize;\n\t\t\t\t\t\tvar minMargin = 4 + 4; // left+right\n\t\t\t\t\t\tvar bubbleSpace = (bubbleSize + minMargin);\n\t\t\t\t\t\tvar rawQuotient = scrollerWidth / bubbleSpace;\n\t\t\t\t\t\tvar bubblesInView = Math.floor(rawQuotient);\n\t\t\t\t\t\tvar extraSpace = scrollerWidth - (bubblesInView * bubbleSpace);\n\t\t\t\t\t\tvar extraMargin = extraSpace / bubblesInView;\n\t\t\t\t\t\tvar bubbleMargin = minMargin + extraMargin;\n\t\t\t\t\t\tvar finalBubbleSpace = bubbleMargin + bubbleSize;\n\n\t\t\t\t\t\tscope._bubblesInView = bubblesInView;\n\t\t\t\t\t\tscope._finalBubbleSpace = finalBubbleSpace;\n\t\t\t\t\t\tscope._bubbleMargin = '0 ' + (bubbleMargin/2) + 'px';\n\n\t\t\t\t\t\tscope._safeApply(angular.noop);\n\t\t\t\t\t};\n\n\t\t\t\t\t$timeout(autoFitBubbles);\n\n\t\t\t\t\tangular.element($window).bind('resize', function(){\n\t\t\t\t\t\t$timeout(autoFitBubbles);\n\t\t\t\t\t});\n\t\t\t\t\tscope.$watch('inline', function(){\n\t\t\t\t\t\t$timeout(autoFitBubbles);\n\t\t\t\t\t});\n\t\t\t\t\tscope.$watch('bubbleSize', function(){\n\t\t\t\t\t\t$timeout(autoFitBubbles);\n\t\t\t\t\t});\n\t\t\t\t\tscope.$watchCollection('images', function(){\n\t\t\t\t\t\t$timeout(autoFitBubbles);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}])\n\t.directive(\"bubbleAutoScroll\", ['$window', '$timeout', function($window, $timeout){\n\t\treturn {\n\t\t\trestrict: \"A\",\n\t\t\tscope: false,\n\t\t\tlink: function (scope, element, attributes){\n\n\t\t\t\tvar indexCalc = function(){\n\t\t\t\t\tvar relativeIndexToBubbleWrapper = scope._bubblesInView - (scope._bubblesInView - scope._activeImageIndex);\n\n\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\tif(relativeIndexToBubbleWrapper > scope._bubblesInView - 2){\n\t\t\t\t\t\t\tvar outBubbles = ((scope._activeImageIndex+1) - scope._bubblesInView) + 1;\n\n\t\t\t\t\t\t\tif(scope._activeImageIndex != (scope.images.length - 1)){\n\t\t\t\t\t\t\t\tscope._bubblesContainerMarginLeft = '-' + (scope._finalBubbleSpace * outBubbles) + 'px';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tscope._bubblesContainerMarginLeft = '-' + (scope._finalBubbleSpace * (outBubbles - 1)) + 'px';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tscope._bubblesContainerMarginLeft = '0px';\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tangular.element($window).bind('resize', function(){\n\t\t\t\t\t$timeout(indexCalc);\n\t\t\t\t});\n\t\t\t\tscope.$watch('_bubblesInView', function(){\n\t\t\t\t\t$timeout(indexCalc);\n\t\t\t\t});\n\t\t\t\tscope.$watch('_activeImageIndex', function(){\n\t\t\t\t\t$timeout(indexCalc);\n\t\t\t\t});\n\t\t\t\tscope.$watchCollection('images', function(){\n\t\t\t\t\t$timeout(indexCalc);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}])\n\t.directive('ngImageGallery', ['$rootScope', '$timeout', '$q', 'ngImageGalleryOpts',\n\tfunction($rootScope, $timeout, $q, ngImageGalleryOpts){\n\t\treturn {\n\t\t\treplace : true,\n\t\t\ttransclude : false,\n\t\t\trestrict : 'AE',\n\t\t\tscope : {\n\t\t\t\timages \t\t\t: \t'=',\t\t// []\n\t\t\t\tmethods \t\t: \t'=?',\t\t// {}\n\t\t\t\tconf \t\t\t: \t'=?',\t\t// {}\n\t\t\t\tentityName\t\t:\t'=?',\t\t// entityName\n\t\t\t\tentityAddress\t:\t'=?',\t\t// entityAddress\n\n\t\t\t\tthumbnails \t\t: \t'=?',\t\t// true|false\n\t\t\t\tthumbSize\t\t: \t'=?', \t\t// px\n\t\t\t\tthumbLimit\t\t: \t'=?', \t\t// px\n\t\t\t\tinline \t\t\t: \t'=?',\t\t// true|false\n\t\t\t\tbubbles \t\t: \t'=?',\t\t// true|false\n\t\t\t\tbubbleSize \t\t: \t'=?',\t\t// px\n\t\t\t\timgBubbles \t\t: \t'=?',\t\t// true|false\n\t\t\t\tbgClose \t\t: \t'=?',\t\t// true|false\n\t\t\t\tpiracy\t\t\t: \t'=?',\t\t// true|false\n\t\t\t\timgAnim \t\t: \t'@?',\t\t// {name}\n\t\t\t\ttextValues      :   '=?',\t\t// {}\n\n\t\t\t\tonOpen \t\t\t: \t'&?',\t\t// function\n\t\t\t\tonClose \t\t: \t'&?',\t\t// function,\n\t\t\t\tonDelete        :   '&?',\n\t\t\t\tonEdit          :   '&?'\n\t\t\t},\n\t\t\ttemplate : \t'<div class=\"ng-image-gallery img-move-dir-{{_imgMoveDirection}}\" ng-class=\"{inline:inline}\" ng-hide=\"images.length == 0\">'+\n\n\t\t\t\t\t\t\t// Thumbnails container\n\t\t\t\t\t\t\t//  Hide for inline gallery\n\t\t\t\t\t\t\t'<div ng-if=\"thumbnails && !inline\" class=\"ng-image-gallery-thumbnails\">' +\n \t\t\t\t\t\t\t\t'<div class=\"thumb\" ng-repeat=\"image in images track by image.id\" ng-if=\"thumbLimit ? $index < thumbLimit : true\" ng-click=\"methods.open($index);\" show-image-async=\"{{image.thumbUrl || image.url}}\" title=\"{{image.title}}\" async-kind=\"thumb\" ng-style=\"{\\'width\\' : thumbSize+\\'px\\', \\'height\\' : thumbSize+\\'px\\'}\">'+\n \t\t\t\t\t\t\t\t\t'<div class=\"loader\"></div>'+\n \t\t\t\t\t\t\t\t'</div>' +\n \t\t\t\t\t\t\t'</div>' +\n\n\t\t\t\t\t\t\t// Modal container\n\t\t\t\t\t\t\t// (inline container for inline modal)\n\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-modal\" ng-if=\"opened\" ng-cloak>' +\n\n\t\t\t\t\t\t\t\t// Gallery backdrop container\n\t\t\t\t\t\t\t\t// (hide for inline gallery)\n\t\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-backdrop\" ng-if=\"!inline\"></div>'+\n\n\t\t\t\t\t\t\t\t// Gallery contents container\n\t\t\t\t\t\t\t\t// (hide when image is loading)\n\t\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-content\" ng-show=\"!imgLoading\" ng-click=\"backgroundClose($event);\">'+\n\n\t\t\t\t\t\t\t\t\t// actions icons container\n\t\t\t\t\t\t\t\t\t'<div class=\"actions-icons-container\">'+\n\t\t\t\t\t\t\t\t\t\t// Delete image icon\n\t\t\t\t\t\t\t\t\t\t'<div class=\"delete-img\" ng-repeat=\"image in images track by image.id\" ng-if=\"_activeImg == image && image.deletable\" title=\"{{textValues.deleteButtonTitle}}\" ng-click=\"_deleteImg(image)\"></div>' +\n\n                                        // Edit image icon\n\t\t\t\t\t\t\t\t\t\t'<div class=\"edit-img\" ng-repeat=\"image in images track by image.id\" ng-if=\"_activeImg == image && image.editable\" title=\"{{textValues.editButtonTitle}}\" ng-click=\"_editImg(image)\"></div>' +\n\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t\t// control icons container\n\t\t\t\t\t\t\t\t\t'<div class=\"control-icons-container\">'+\n\t\t\t\t\t\t\t\t\t\t// External link icon\n\t\t\t\t\t\t\t\t\t\t'<a class=\"ext-url\" ng-repeat=\"image in images track by image.id\" ng-if=\"_activeImg == image && image.extUrl\" href=\"{{image.extUrl}}\" target=\"_blank\" title=\"{{textValues.externalLinkButtonTitle}}\"></a>' +\n\n\t\t\t\t\t\t\t\t\t\t// Close Icon (hidden in inline gallery)\n\t\t\t\t\t\t\t\t\t\t'<div class=\"close\" ng-click=\"methods.close();\" ng-if=\"!inline\"  title=\"{{textValues.closeButtonTitle}}\">Close</div>' +\n\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t\t// Prev-Next Icons\n\t\t\t\t\t\t\t\t\t// Add `bubbles-on` class when bubbles are enabled (for offset)\n\t\t\t\t\t\t\t\t\t'<div class=\"prev\" ng-click=\"methods.prev();\" ng-class=\"{\\'bubbles-on\\':bubbles}\" ng-hide=\"images.length == 1\"></div>'+\n\t\t\t\t\t\t\t\t\t'<div class=\"next\" ng-click=\"methods.next();\" ng-class=\"{\\'bubbles-on\\':bubbles}\" ng-hide=\"images.length == 1\"></div>'+\n\n\t\t\t\t\t\t\t\t\t// Galleria container\n\t\t\t\t\t\t\t\t\t'<div class=\"galleria\">'+\n\n\t\t\t\t\t\t\t\t\t\t'<div class=\"entity-name\" ng-if=\"entityName\" ng-bind-html=\"entityName\"></div> '+\n\t\t\t\t\t\t\t\t\t\t'<div class=\"entity-address\"  ng-if=\"entityAddress\" ng-bind-html=\"entityAddress\"></div>'+\n\n\t\t\t\t\t\t\t\t\t\t// Images container\n\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-images img-anim-{{imgAnim}} img-move-dir-{{_imgMoveDirection}}\">'+\n\t\t\t\t\t\t\t\t\t\t\t'<img class=\"galleria-image\" ng-right-click ng-repeat=\"image in images track by image.id\" ng-if=\"_activeImg == image\" ng-src=\"{{image.url}}\" ondragstart=\"return false;\" ng-attr-alt=\"{{image.alt || undefined}}\"/>'+\n\t\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t\t\t// Image description container\n\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-title-description-wrapper\">'+\n\t\t\t\t\t\t\t\t\t\t\t'<div ng-repeat=\"image in images track by image.id\" ng-if=\"(image.title || image.desc) && (_activeImg == image)\">'+\n\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"title\" ng-if=\"image.title\" ng-bind-html=\"image.title | ngImageGalleryTrust\"></div>'+\n\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"desc\" ng-if=\"image.desc\" ng-bind-html=\"image.desc | ngImageGalleryTrust\"></div>'+\n\t\t\t\t\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t\t\t// Bubble navigation container\n\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-bubbles-wrapper\" ng-if=\"bubbles && !imgBubbles\" ng-hide=\"images.length == 1\" ng-style=\"{\\'height\\' : bubbleSize+\\'px\\'}\" bubble-auto-fit>'+\n\t\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-bubbles\" bubble-auto-scroll ng-style=\"{\\'margin-left\\': _bubblesContainerMarginLeft}\">'+\n\t\t\t\t\t\t\t\t\t\t\t\t'<span class=\"galleria-bubble\" ng-click=\"_setActiveImg(image);\" ng-repeat=\"image in images track by image.id\" ng-class=\"{active : (_activeImg == image)}\" ng-style=\"{\\'width\\' : bubbleSize+\\'px\\', \\'height\\' : bubbleSize+\\'px\\', margin: _bubbleMargin}\"></span>'+\n\t\t\t\t\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t\t\t// Image bubble navigation container\n\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-bubbles-wrapper\" ng-if=\"bubbles && imgBubbles\" ng-hide=\"images.length == 1\" ng-style=\"{\\'height\\' : bubbleSize+\\'px\\'}\" bubble-auto-fit>'+\n\t\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-bubbles\" bubble-auto-scroll ng-style=\"{\\'margin-left\\': _bubblesContainerMarginLeft}\">'+\n\t\t\t\t\t\t\t\t\t\t\t\t'<span class=\"galleria-bubble img-bubble\" ng-click=\"_setActiveImg(image);\" ng-repeat=\"image in images track by image.id\" ng-class=\"{active : (_activeImg == image)}\" show-image-async=\"{{image.bubbleUrl || image.thumbUrl || image.url}}\" async-kind=\"bubble\" ng-style=\"{\\'width\\' : bubbleSize+\\'px\\', \\'height\\' : bubbleSize+\\'px\\', \\'border-width\\' : bubbleSize/10+\\'px\\', margin: _bubbleMargin}\"></span>'+\n\t\t\t\t\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t// Loading animation overlay container\n\t\t\t\t\t\t\t\t// (show when image is loading)\n\t\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-loader\" ng-show=\"imgLoading\">'+\n\t\t\t\t\t\t\t\t\t'<div class=\"spinner\">'+\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect1\"></div>'+\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect2\"></div>'+\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect3\"></div>'+\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect4\"></div>'+\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect5\"></div>'+\n\t\t\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t// (show when image cannot be loaded)\n\t\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-errorplaceholder\" ng-show=\"imgError\">'+\n\t\t\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-error-placeholder\" ng-bind-html=\"textValues.imageLoadErrorMsg | ngImageGalleryTrust\"></div>' +\n\t\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t'</div>',\n\n\t\t\tlink : {\n\t\t\t\tpre : function(scope, elem, attr){\n\n\t\t\t\t\t/*\n\t\t\t\t\t *\tOperational functions\n\t\t\t\t\t**/\n\n\t\t\t\t\t// Show gallery loader\n\t\t\t\t\tscope._showLoader = function(){\n\t\t\t\t\t\tscope.imgLoading = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Hide gallery loader\n\t\t\t\t\tscope._hideLoader = function(){\n\t\t\t\t\t\tscope.imgLoading = false;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Image load complete promise\n\t\t\t\t\tscope._loadImg = function(imgObj){\n\n\t\t\t\t\t\t// Return rejected promise\n\t\t\t\t\t\t// if not image object received\n\t\t\t\t\t\tif(!imgObj) return $q.reject();\n\n\t\t\t\t\t\tvar deferred =  $q.defer();\n\n\t\t\t\t\t\t// Show loader\n\t\t\t\t\t\tif(!imgObj.hasOwnProperty('cached')) scope._showLoader();\n\n\t\t\t\t\t\t// Process image\n\t\t\t\t\t\tvar img = new Image();\n\t\t\t\t\t\timg.src = imgObj.url;\n\t\t\t\t\t\timg.onload = function(){\n\t\t\t\t\t\t\t// Hide loader\n\t\t\t\t\t\t\tif(!imgObj.hasOwnProperty('cached')) scope._hideLoader();\n\n\t\t\t\t\t\t\t// Cache image\n\t\t\t\t\t\t\tif(!imgObj.hasOwnProperty('cached')) imgObj.cached = true;\n\n\t\t\t\t\t\t\tdeferred.resolve(imgObj);\n\t\t\t\t\t\t}\n\t\t\t\t\t\timg.onerror = function(){\n\t\t\t\t\t\t\tif(!imgObj.hasOwnProperty('cached')) scope._hideLoader();\n\n\t\t\t\t\t\t\tdeferred.reject('Error when loading img');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn deferred.promise;\n\t\t\t\t\t}\n\n\t\t\t\t\tscope._setActiveImg = function(imgObj){\n\t\t\t\t\t\t// Get images move direction\n\t\t\t\t\t\tif(\n\t\t\t\t\t\t\tscope.images.indexOf(scope._activeImg) - scope.images.indexOf(imgObj) == (scope.images.length - 1) ||\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tscope.images.indexOf(scope._activeImg) - scope.images.indexOf(imgObj) <= 0 &&\n\t\t\t\t\t\t\t\tscope.images.indexOf(scope._activeImg) - scope.images.indexOf(imgObj) != -(scope.images.length - 1)\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t){\n\t\t\t\t\t\t\tscope._imgMoveDirection = 'forward';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tscope._imgMoveDirection = 'backward';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Load image\n\t\t\t\t\t\tscope._loadImg(imgObj).then(function(imgObj){\n\t\t\t\t\t\t\tscope._activeImg = imgObj;\n\t\t\t\t\t\t\tscope._activeImageIndex = scope.images.indexOf(imgObj);\n\t\t\t\t\t\t\tscope.imgError = false;\n\t\t\t\t\t\t}, function(){\n\t\t\t\t\t\t\tscope._activeImg = null;\n\t\t\t\t\t\t\tscope._activeImageIndex = scope.images.indexOf(imgObj);\n\t\t\t\t\t\t\tscope.imgError = true;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t;\n\t\t\t\t\t}\n\n\t\t\t\t\tscope._safeApply = function(fn){\n\t\t\t\t\t\tvar phase = this.$root.$$phase;\n\t\t\t\t\t\tif(phase == '$apply' || phase == '$digest'){\n\t\t\t\t\t\t\tif(fn && (typeof(fn) === 'function')){\n\t\t\t\t\t\t\t\tfn();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$apply(fn);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tscope._deleteImg = function(img){\n\t\t\t\t\t\tvar _deleteImgCallback = function(){\n\t\t\t\t\t\t\tvar index = scope.images.indexOf(img);\n\t\t\t\t\t\t\tconsole.log(index);\n\t\t\t\t\t\t\tscope.images.splice(index, 1);\n\t\t\t\t\t\t\tscope._activeImageIndex = 0;\n\n\t\t\t\t\t\t\t/**/\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tscope.onDelete({img: img, cb: _deleteImgCallback});\n\t\t\t\t\t}\n\n\t\t\t\t\tscope._editImg = function (img) {\n\t\t\t\t\t    if (!scope.inline) scope.methods.close();\n\n\t\t\t\t\t    scope.onEdit({ img: img });\n\t\t\t\t\t}\n\n\n\t\t\t\t\t/***************************************************/\n\n\n\t\t\t\t\t/*\n\t\t\t\t\t *\tGallery settings\n\t\t\t\t\t**/\n\n\t\t\t\t\t// Modify scope models\n\t\t\t\t\tscope.images \t \t = \t(scope.images \t\t!= undefined) ? scope.images \t \t: \t[];\n\t\t\t\t\tscope.methods \t \t = \t(scope.methods \t\t!= undefined) ? scope.methods \t \t: \t{};\n\t\t\t\t\tscope.conf \t \t\t = \t(scope.conf \t\t!= undefined) ? scope.conf \t\t \t: \t{};\n\t\t\t\t\tscope.entityName \t = \t(scope.entityName\t!= undefined) ? scope.entityName \t: \t\"\";\n\t\t\t\t\tscope.entityAddress = \t(scope.entityAddress!= undefined)? scope.entityAddress: \t\"\";\n\n\t\t\t\t\t// setting options\n\t\t\t\t\tscope.$watchCollection('conf', function(conf){\n\t\t\t\t\t\tscope.thumbnails \t = \t(conf.thumbnails \t!= undefined) ? conf.thumbnails \t: \t(scope.thumbnails \t!= undefined) \t?  scope.thumbnails\t\t: \tngImageGalleryOpts.thumbnails;\n\t\t\t\t\t\tscope.thumbSize \t = \t(conf.thumbSize \t!= undefined) ? conf.thumbSize \t\t: \t(scope.thumbSize \t!= undefined) \t?  scope.thumbSize\t\t: \tngImageGalleryOpts.thumbSize;\n\t\t\t\t\t\tscope.thumbLimit \t = \t(conf.thumbLimit \t!= undefined) ? conf.thumbLimit \t\t: \t(scope.thumbLimit\t!= undefined) \t?  scope.thumbLimit\t\t: \tngImageGalleryOpts.thumbLimit;\n\t\t\t\t\t\tscope.inline \t \t = \t(conf.inline \t\t!= undefined) ? conf.inline \t \t: \t(scope.inline \t\t!= undefined) \t?  scope.inline\t\t\t: \tngImageGalleryOpts.inline;\n\t\t\t\t\t\tscope.bubbles \t \t = \t(conf.bubbles \t\t!= undefined) ? conf.bubbles \t \t: \t(scope.bubbles \t\t!= undefined) \t?  scope.bubbles\t\t: \tngImageGalleryOpts.bubbles;\n\t\t\t\t\t\tscope.bubbleSize \t = \t(conf.bubbleSize \t!= undefined) ? conf.bubbleSize \t : \t(scope.bubbleSize \t!= undefined) \t?  scope.bubbleSize\t\t: \tngImageGalleryOpts.bubbleSize;\n\t\t\t\t\t\tscope.imgBubbles \t = \t(conf.imgBubbles \t!= undefined) ? conf.imgBubbles \t: \t(scope.imgBubbles \t!= undefined) \t?  scope.imgBubbles\t\t: \tngImageGalleryOpts.imgBubbles;\n\t\t\t\t\t\tscope.bgClose \t \t = \t(conf.bgClose \t\t!= undefined) ? conf.bgClose \t \t: \t(scope.bgClose \t\t!= undefined) \t?  scope.bgClose\t\t: \tngImageGalleryOpts.bgClose;\n\t\t\t\t\t\tscope.piracy \t \t = \t(conf.piracy \t\t!= undefined) ? conf.piracy \t \t: \t(scope.piracy \t\t!= undefined) \t?  scope.piracy\t\t\t: \tngImageGalleryOpts.piracy;\n\t\t\t\t\t\tscope.imgAnim \t \t = \t(conf.imgAnim \t\t!= undefined) ? conf.imgAnim \t \t: \t(scope.imgAnim \t\t!= undefined) \t?  scope.imgAnim\t\t: \tngImageGalleryOpts.imgAnim;\n                        scope.textValues     =  (conf.textValues    != undefined) ? conf.textValues     :   (scope.textValues   != undefined)   ?  scope.textValues     :   ngImageGalleryOpts.textValues;\n\t\t\t\t\t});\n\n\t\t\t\t\tscope.onOpen \t = \t(scope.onOpen \t!= undefined) ? scope.onOpen \t : \tangular.noop;\n\t\t\t\t\tscope.onClose \t = \t(scope.onClose \t!= undefined) ? scope.onClose \t : \tangular.noop;\n\t\t\t\t\tscope.onDelete \t = \t(scope.onDelete != undefined) ? scope.onDelete \t : \tangular.noop;\n\t\t\t\t\tscope.onEdit = (scope.onEdit != undefined) ? scope.onEdit : angular.noop;\n\n\t\t\t\t\t// If images populate dynamically, reset gallery\n\t\t\t\t\tvar imagesFirstWatch = true;\n\t\t\t\t\tscope.$watchCollection('images', function(){\n\t\t\t\t\t\tif(imagesFirstWatch){\n\t\t\t\t\t\t\timagesFirstWatch = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(scope.images.length){\n\t\t\t\t\t\t\tscope._setActiveImg(scope.images[scope._activeImageIndex || 0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// Watch index of visible/active image\n\t\t\t\t\t// If index changes, make sure to load/change image\n\t\t\t\t\tvar activeImageIndexFirstWatch = true;\n\t\t\t\t\tscope.$watch('_activeImageIndex', function(newImgIndex){\n\t\t\t\t\t\tif(activeImageIndexFirstWatch){\n\t\t\t\t\t\t\tactiveImageIndexFirstWatch = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(scope.images.length){\n\t\t\t\t\t\t\tscope._setActiveImg(\n\t\t\t\t\t\t\t\tscope.images[newImgIndex]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// Open modal automatically if inline\n\t\t\t\t\tscope.$watch('inline', function(){\n\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\tif(scope.inline) scope.methods.open();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\n\t\t\t\t\t/***************************************************/\n\n\n\t\t\t\t\t/*\n\t\t\t\t\t *\tMethods\n\t\t\t\t\t**/\n\n\t\t\t\t\t// Open gallery modal\n\t\t\t\t\tscope.methods.open = function(imgIndex){\n\t\t\t\t\t\t// Open modal from an index if one passed\n\t\t\t\t\t\tscope._activeImageIndex = (imgIndex) ? imgIndex : 0;\n\n\t\t\t\t\t\tscope.opened = true;\n\n\t\t\t\t\t\t// set overflow hidden to body\n\t\t\t\t\t\tif(!scope.inline) angular.element(document.body).addClass('body-overflow-hidden');\n\n\t\t\t\t\t\t// call open event after transition\n\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\tscope.onOpen();\n\t\t\t\t\t\t}, 300);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Close gallery modal\n\t\t\t\t\tscope.methods.close = function(){\n\t\t\t\t\t\tscope.opened = false; // Model closed\n\n\t\t\t\t\t\t// set overflow hidden to body\n\t\t\t\t\t\tangular.element(document.body).removeClass('body-overflow-hidden');\n\n\t\t\t\t\t\t// call close event after transition\n\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\tscope.onClose();\n\t\t\t\t\t\t\tscope._activeImageIndex = 0; // Reset index\n\t\t\t\t\t\t}, 300);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Change image to next\n\t\t\t\t\tscope.methods.next = function(){\n\t\t\t\t\t\tif(scope._activeImageIndex == (scope.images.length - 1)){\n\t\t\t\t\t\t\tscope._activeImageIndex = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tscope._activeImageIndex = scope._activeImageIndex + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Change image to prev\n\t\t\t\t\tscope.methods.prev = function(){\n\t\t\t\t\t\tif(scope._activeImageIndex == 0){\n\t\t\t\t\t\t\tscope._activeImageIndex = scope.images.length - 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tscope._activeImageIndex--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Close gallery on background click\n\t\t\t\t\tscope.backgroundClose = function(e){\n\t\t\t\t\t\tif(!scope.bgClose || scope.inline) return;\n\n\t\t\t\t\t\tvar noCloseClasses = [\n\t\t\t\t\t\t\t'galleria-image',\n\t\t\t\t\t\t\t'destroy-icons-container',\n\t\t\t\t\t\t\t'ext-url',\n\t\t\t\t\t\t\t'close',\n\t\t\t\t\t\t\t'next',\n\t\t\t\t\t\t\t'prev',\n\t\t\t\t\t\t\t'galleria-bubble'\n\t\t\t\t\t\t];\n\n\t\t\t\t\t\t// check if clicked element has a class that\n\t\t\t\t\t\t// belongs to `noCloseClasses`\n\t\t\t\t\t\tfor(var i = 0; i < e.target.classList.length; i++){\n\t\t\t\t\t\t\tif(noCloseClasses.indexOf(e.target.classList[i]) != -1){\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tscope.methods.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\n\t\t\t\t\t/***************************************************/\n\n\n\t\t\t\t\t/*\n\t\t\t\t\t *\tUser interactions\n\t\t\t\t\t**/\n\n\t\t\t\t\t// Key events\n\t\t\t\t\tangular.element(document).bind('keyup', function(event){\n\t\t\t\t\t\t// If inline modal, do not interact\n\t\t\t\t\t\tif(scope.inline) return;\n\n\t\t\t\t\t\tif(event.which == keys.right || event.which == keys.enter){\n\t\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\t\tscope.methods.next();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(event.which == keys.left){\n\t\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\t\tscope.methods.prev();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(event.which == keys.esc){\n\t\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\t\tscope.methods.close();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// Swipe events\n\t\t\t\t\tif(window.Hammer){\n\t\t\t\t\t\tvar hammerElem = new Hammer(elem[0]);\n\t\t\t\t\t\thammerElem.on('swiperight', function(ev){\n\t\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\t\tscope.methods.prev();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\thammerElem.on('swipeleft', function(ev){\n\t\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\t\tscope.methods.next();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\thammerElem.on('doubletap', function(ev){\n\t\t\t\t\t\t\tif(scope.inline) return;\n\n\t\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\t\tscope.methods.close();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\n\t\t\t\t\t/***********************************************************/\n\n\n\t\t\t\t\t/*\n\t\t\t\t\t *\tActions on angular events\n\t\t\t\t\t**/\n\n\t\t\t\t\tvar removeClassFromDocumentBody = function(){\n\t\t\t\t\t\tangular.element(document.body).removeClass('body-overflow-hidden');\n\t\t\t\t\t};\n\n\t\t\t\t\t$rootScope.$on('$stateChangeSuccess', removeClassFromDocumentBody);\n\t\t\t\t\t$rootScope.$on('$routeChangeSuccess', removeClassFromDocumentBody);\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}]);\n })();"]}